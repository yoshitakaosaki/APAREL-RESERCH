# 機能要件仕様書 - 03.テクニカルフラット（背面）機能

## 1. 機能概要

テクニカルフラット（背面）は、製品の背面図を技術的に表現し、前面図と連動して製品の完全な構造を視覚化する機能です。前面図（02）との整合性を保ちながら、背面特有の仕様を詳細に定義します。

## 2. 機能要件

### 2.1 図面作成・編集機能

#### 前面図との連動
- **自動同期機能**:
  - 外形ラインの自動反映
  - 共通パーツの寸法同期
  - レイヤー構造の共有
  - スタイル変更の双方向反映
- **独立編集モード**:
  - 背面固有要素の編集
  - 前面との差分管理
  - 選択的同期設定

#### 背面特有の描画機能
- **背ヨーク表現**:
  - 直線/曲線ヨーク選択
  - 深さ・角度の数値制御
  - プリーツ・タック表現
- **センターシーム**:
  - 有無の切替
  - シーム幅設定
  - ベント仕様定義
- **肩線構造**:
  - 肩傾斜角度
  - 肩パッド表現
  - ドロップショルダー対応

### 2.2 背面固有仕様の定義

#### ダーツ・プリーツ管理
- **バックダーツ**:
  - 位置（ウエストラインからの距離）
  - 本数（0-4本）
  - 幅・深さ（mm単位）
  - 左右対称/非対称設定
- **プリーツ仕様**:
  - ボックスプリーツ
  - サイドプリーツ
  - インバーテッドプリーツ
  - 折り方向指定

#### 背面デザイン要素
- **装飾ライン**:
  - 切替線配置
  - パイピング表現
  - 刺繍・プリント位置
- **機能要素**:
  - ベンチレーション配置
  - 反射材位置
  - 補強パッチ

### 2.3 ラベル・ブランド表示機能

#### ネームラベル配置
- **標準位置プリセット**:
  - 襟裏中央
  - 左脇内側
  - 裾内側
  - カスタム位置
- **ラベル仕様連携**:
  - セクション07との自動連携
  - サイズ・取付方法の参照
  - 多言語ラベル対応

#### ブランドロゴ配置
- **配置オプション**:
  - 刺繍位置指定
  - プリント位置指定
  - ワッペン取付位置
- **サイズ・色指定**:
  - 実寸サイズ入力
  - カラーコード指定
  - 透明度設定

### 2.4 特殊仕様対応

#### アシンメトリーデザイン
- **左右非対称モード**:
  - 独立した左右編集
  - 差分ハイライト表示
  - 対称性チェック無効化

#### レイヤードデザイン
- **重ね着表現**:
  - インナー透過表示
  - レイヤー別管理
  - 着丈差の表現

### 2.5 測定ポイント定義

#### 背面専用測定
- **背丈測定**:
  - HPS（High Point Shoulder）
  - CB（Center Back）長
  - サイドシーム長
- **背幅測定**:
  - 肩幅
  - 背幅（アームホール間）
  - 裾幅
- **自動測定ポイント**:
  - セクション09,10への連携
  - 測定線の自動生成
  - 番号付与と管理

## 3. UI/UX要件

### 3.1 作業画面構成
- **ビュー切替**:
  - 前面/背面切替（ワンクリック）
  - 同時表示モード（並列/重ね合わせ）
  - 透過表示オプション
- **専用ツールバー**:
  - 背面特化ツール配置
  - よく使う機能のカスタマイズ
  - コンテキストメニュー

### 3.2 操作効率化
- **ミラーリング機能**:
  - 前面からの自動生成
  - 選択的要素コピー
  - 変更箇所のハイライト
- **テンプレート活用**:
  - 背面専用テンプレート
  - スタイル別プリセット
  - ユーザー定義テンプレート

### 3.3 プレビュー機能
- **360度ビュー**:
  - 前面・背面の連続表示
  - アニメーション回転
  - VR対応（オプション）
- **比較表示**:
  - 前面・背面の重ね合わせ
  - 差分ハイライト
  - 寸法比較表

## 4. データ連携要件

### 4.1 前面図（02）との連携
- **必須同期項目**:
  - 製品外形
  - 基本寸法
  - 共通ステッチライン
- **選択同期項目**:
  - デザインライン
  - 装飾要素
  - カラー情報

### 4.2 他セクションとの連携
- **ディテール（04）連携**:
  - 背面特有の詳細図リンク
  - ヨーク・ダーツの拡大図
- **縫製仕様（11）連携**:
  - 背面縫製順序
  - 特殊工程の参照
- **BOM（05）連携**:
  - 背面専用パーツリスト
  - 追加資材の管理

## 5. バリデーション要件

### 5.1 整合性チェック
- **前後一致検証**:
  - 肩線長の一致
  - サイドシーム長の一致
  - 全体バランスチェック
- **構造検証**:
  - ダーツ位置の妥当性
  - ヨーク線の連続性
  - 縫い目の論理性

### 5.2 完成度チェック
- **必須要素**:
  - 背面外形線
  - 主要構造線
  - ネームラベル位置
- **推奨要素**:
  - ヨーク/ダーツ表現
  - ステッチ詳細
  - 測定ポイント

## 6. 性能要件

- **レンダリング性能**:
  - 前面図との同時編集：30fps以上
  - ミラーリング処理：200ms以内
  - 同期更新：500ms以内
- **メモリ効率**:
  - 前面図とのデータ共有による最適化
  - 差分データのみの保存

## 7. 技術仕様

### 7.1 データ構造
- **継承モデル**:
  - 前面図データの継承
  - 背面固有データの追加
  - 差分管理システム
- **同期メカニズム**:
  - リアルタイム同期
  - コンフリクト解決
  - ロールバック機能

### 7.2 レンダリング最適化
- **共有リソース**:
  - テクスチャ・パターンの共有
  - スタイルシートの統一
  - キャッシュの効率化

## 8. セキュリティ・アクセス制御

- **編集権限**:
  - 前面・背面独立した権限設定
  - 同時編集時のロック制御
  - 変更履歴の追跡
- **データ保護**:
  - 前後データの整合性保証
  - 自動バックアップ
  - バージョン管理