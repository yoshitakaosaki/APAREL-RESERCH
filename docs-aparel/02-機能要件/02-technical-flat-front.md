# 機能要件仕様書 - 02.テクニカルフラット（前面）機能

## 1. 機能概要

テクニカルフラット（前面）は、製品の前面図を技術的に正確に表現し、構造や仕様を視覚的に伝達する機能です。CADレベルの精度を持ちながら、Web上で直感的に作成・編集できることが特徴です。

## 2. 機能要件

### 2.1 図面作成・編集機能

#### ベクター描画エンジン
- **対応形式**:
  - ネイティブ: SVG、Canvas
  - インポート: AI、EPS、DXF、DWG
  - エクスポート: SVG、PNG、PDF、AI互換
- **描画ツール**:
  - 直線、曲線、ベジェ曲線
  - 基本図形（円、四角、多角形）
  - パスツール（ペン、鉛筆）
  - シンメトリーモード（左右対称描画）
- **編集機能**:
  - パスの結合・分割・トリミング
  - アンカーポイント編集
  - 変形（回転、拡大縮小、歪み）
  - レイヤー管理（最大50レイヤー）

#### プリセットライブラリ
- **基本アイテムテンプレート**:
  - Tシャツ、シャツ、ジャケット、パンツ、スカート等
  - 各アイテム3-5バリエーション
- **パーツライブラリ**:
  - 襟型（20種類以上）
  - 袖型（15種類以上）
  - ポケット型（25種類以上）
  - 前立て仕様（10種類以上）
- **カスタマイズ機能**:
  - テンプレートの編集・保存
  - オリジナルパーツの登録

### 2.2 仕様注記機能

#### 寸法線・注釈
- **寸法線ツール**:
  - 水平・垂直・斜め寸法
  - 円弧・角度寸法
  - 連続寸法
  - 自動整列機能
- **注釈機能**:
  - 引き出し線付きテキスト
  - 番号バルーン（自動採番）
  - 記号ライブラリ（ステッチ、芯地等）
  - 多言語対応（日本語、英語、中国語）

#### ステッチ表現
- **ステッチタイプ**:
  - 本縫い（実線）
  - ロックステッチ（破線）
  - 飾りステッチ（二重線）
  - カスタムステッチパターン
- **ステッチ仕様**:
  - 針数指定（インチ単位）
  - 糸色指定
  - ステッチ幅設定

### 2.3 パーツ詳細定義機能

#### 構造要素の定義
- **襟仕様**:
  - 襟型選択・カスタマイズ
  - 襟幅・高さの数値入力
  - 芯地仕様の指定
  - ステッチライン定義
- **前立て仕様**:
  - 比翼/表前立て選択
  - 幅・長さ指定
  - ボタンホール位置（自動計算対応）
- **ポケット仕様**:
  - 位置座標（胸・腰）
  - サイズ（幅×深さ）
  - フラップ有無・形状
  - 取付方法指定

#### ボタン・ファスナー配置
- **ボタン配置**:
  - 自動等間隔配置
  - サイズ指定（直径mm）
  - 個数・間隔調整
  - ボタンタイプ選択
- **ファスナー仕様**:
  - 長さ・タイプ指定
  - スライダー位置
  - 見え/コンシール選択

### 2.4 連携・参照機能

#### セクション間連携
- **カバーページ（01）連携**:
  - スタイル情報の自動表示
  - 基本仕様の引用
- **ディテール（04）連携**:
  - 部分拡大図へのリンク設定
  - 番号による相互参照
- **寸法仕様（09）連携**:
  - 測定ポイントの自動マッピング
  - 寸法値の同期更新

#### データ同期
- **自動更新**:
  - 関連セクションへの変更通知
  - 寸法変更時の図面調整
- **整合性チェック**:
  - 寸法と図面の不一致検出
  - 参照番号の重複チェック

## 3. UI/UX要件

### 3.1 作業画面レイアウト
- **メイン描画エリア**:
  - ズーム（10%-1000%）
  - パン・回転機能
  - グリッド・スナップ
  - ルーラー表示（cm/inch切替）
- **ツールパネル**:
  - 左側：描画ツール
  - 右側：プロパティパネル
  - 上部：ファイル・編集メニュー
  - 下部：レイヤー・履歴パネル

### 3.2 操作性
- **ショートカットキー**:
  - 業界標準準拠（Illustrator互換）
  - カスタマイズ可能
- **操作補助**:
  - スマートガイド
  - オブジェクトスナップ
  - 磁気整列
- **元に戻す/やり直し**:
  - 100ステップ以上
  - 履歴パネルからの選択復元

### 3.3 プレビュー・出力
- **プレビューモード**:
  - 実寸大表示
  - 印刷プレビュー
  - モバイル表示確認
- **出力オプション**:
  - 解像度選択（72-600dpi）
  - カラーモード（RGB/CMYK）
  - レイヤー保持/統合選択

## 4. バリデーション要件

### 4.1 図面検証
- **構造チェック**:
  - パスの閉じ忘れ検出
  - 重複線の検出
  - 最小線幅チェック
- **仕様整合性**:
  - 左右対称性の確認
  - 寸法の論理チェック
  - 必須要素の存在確認

### 4.2 データ検証
- **必須項目**:
  - 基本シルエット
  - 主要構造線
  - 縫い目表現
  - スケール表示
- **推奨項目**:
  - 寸法注記
  - ステッチ仕様
  - パーツ番号

## 5. 性能要件

- **描画パフォーマンス**:
  - 1000オブジェクトまで：60fps維持
  - ズーム・パン：遅延100ms以下
- **ファイル処理**:
  - 読込：10MB以下3秒以内
  - 保存：1秒以内
  - エクスポート：5秒以内
- **メモリ使用**:
  - 最大500MB/ドキュメント

## 6. 技術仕様

### 6.1 レンダリングエンジン
- **コア技術**: 
  - SVG.js または Paper.js
  - WebGL（高速描画オプション）
- **ブラウザ対応**:
  - Chrome、Firefox、Safari、Edge最新版
  - タッチデバイス対応

### 6.2 データ形式
- **内部形式**:
  - JSON形式でのベクターデータ保存
  - 圧縮オプション（gzip）
- **互換性**:
  - SVG 1.1準拠
  - DXF R2018対応
  - AI CS6以降互換

## 7. セキュリティ要件

- **アクセス制御**:
  - 編集権限の細分化
  - 読取専用モード
- **データ保護**:
  - 自動保存（30秒間隔）
  - バージョン履歴（30日保持）
- **透かし機能**:
  - 企業ロゴ/機密レベル表示
  - PDF出力時の自動付与