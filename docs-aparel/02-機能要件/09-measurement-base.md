# 機能要件仕様書 - 09.寸法仕様（基準サイズ）機能

## 1. 機能概要

寸法仕様（基準サイズ）機能は、製品の基準となるサイズの詳細な測定箇所と寸法値を定義・管理し、パターン作成から品質検査まで一貫した寸法管理を実現する機能です。正確な寸法指示により、製品品質の安定化を支援します。

## 2. 機能要件

### 2.1 測定ポイント管理

#### POM（Point of Measurement）定義
- **測定箇所登録**:
  - POM番号（自動採番）
  - 測定箇所名（多言語）
  - 測定カテゴリー（丈/幅/周囲等）
  - 重要度レベル設定
- **測定方法指定**:
  - 開始点/終了点の明確化
  - 測定時の製品状態（平置き/吊り等）
  - 測定器具指定
  - 測定圧/テンション
- **ビジュアル定義**:
  - 図面上での視覚表示
  - 測定線の描画
  - 写真/動画での説明
  - 3Dモデルでの表示

#### 標準測定ライブラリ
- **アイテム別テンプレート**:
  - トップス（20-30箇所）
  - ボトムス（15-25箇所）
  - アウター（25-35箇所）
  - アクセサリー
- **業界標準準拠**:
  - JIS規格
  - ISO規格
  - ASTM規格
  - ブランド独自規格

### 2.2 寸法値入力・管理

#### 数値入力機能
- **入力方式**:
  - 直接数値入力
  - スライダー調整
  - 計算式入力
  - 他サイズからの参照
- **単位管理**:
  - cm/inch切替
  - 自動換算
  - 小数点桁数設定
  - 端数処理ルール
- **許容差設定**:
  - ±公差値
  - 上限/下限個別設定
  - 箇所別公差率
  - グレード別公差

#### 寸法関連性管理
- **連動設定**:
  - 関連寸法の自動計算
  - 比率設定
  - 制約条件定義
  - バランスチェック
- **計算式定義**:
  - 基本四則演算
  - 条件分岐
  - 関数使用
  - カスタム式登録

### 2.3 測定指示機能

#### 測定手順書生成
- **図解付き指示書**:
  - 測定順序
  - 測定ポイント図示
  - 注意事項
  - よくある間違い例
- **動画マニュアル**:
  - 測定方法動画
  - 正しい例/悪い例
  - ナレーション付き
  - 多言語字幕

#### QC基準設定
- **検査基準**:
  - 必須測定箇所
  - 抜き取り検査箇所
  - 頻度設定
  - 不良判定基準
- **測定記録**:
  - デジタル記録フォーム
  - 実測値入力
  - 合否自動判定
  - 統計分析

### 2.4 フィット確認機能

#### 基準ボディ設定
- **ボディサイズ登録**:
  - 標準ボディ寸法
  - ターゲット体型
  - 地域別体型
  - カスタムボディ
- **フィット目標**:
  - ゆとり量設定
  - 部位別フィット
  - 着用シーン考慮
  - 素材特性反映

#### シミュレーション
- **2D/3Dフィッティング**:
  - 仮想試着
  - 動作確認
  - 圧力分布表示
  - 改善提案

### 2.5 変更管理機能

#### 寸法修正履歴
- **変更追跡**:
  - 変更日時
  - 変更者
  - 変更理由
  - 影響範囲
- **承認プロセス**:
  - 変更申請
  - 影響評価
  - 承認フロー
  - 通知機能

#### バージョン管理
- **履歴保存**:
  - 全バージョン保存
  - 比較機能
  - ロールバック
  - タグ付け
- **派生管理**:
  - ベースからの派生
  - 差分管理
  - マージ機能

## 3. UI/UX要件

### 3.1 入力インターフェース
- **表形式入力**:
  - スプレッドシート風
  - セル間移動
  - 一括コピー&ペースト
  - 数式バー
- **ビジュアル入力**:
  - 図面上で直接入力
  - ドラッグで寸法調整
  - リアルタイム反映
  - 測定線表示

### 3.2 表示カスタマイズ
- **ビュー切替**:
  - 一覧表示
  - カテゴリー別表示
  - 重要度別表示
  - 変更箇所ハイライト
- **フィルター機能**:
  - 測定箇所絞込
  - 公差超過表示
  - 未入力項目
  - カスタムフィルター

## 4. 連携要件

### 4.1 図面連携
- **フラット図（02-03）**:
  - 測定線自動描画
  - 寸法値表示
  - 双方向更新
- **詳細図（04）**:
  - 部分寸法参照
  - 詳細測定指示

### 4.2 生産連携
- **グレーディング（10）**:
  - 基準値提供
  - ルール適用
  - 検証基準
- **縫製仕様（11）**:
  - 仕上がり寸法連携
  - 縫い代考慮
  - 収縮率反映

## 5. バリデーション要件

### 5.1 データ検証
- **必須項目チェック**:
  - 主要寸法入力
  - 測定方法指定
  - 公差設定
  - 単位統一
- **論理チェック**:
  - 寸法バランス
  - 物理的可能性
  - 業界標準範囲
  - 過去データ比較

### 5.2 整合性確認
- **関連データ照合**:
  - パターンとの一致
  - サンプル実測値
  - 仕様変更反映
  - グレーディング整合

## 6. 性能要件

- **計算処理**:
  - リアルタイム再計算
  - 1000項目：1秒以内
  - 複雑な計算式対応
- **データ管理**:
  - 10万製品の寸法管理
  - 高速検索
  - 統計処理

## 7. 出力機能

### 7.1 仕様書出力
- **測定仕様書**:
  - 図解付き一覧表
  - QC検査シート
  - 測定手順書
  - 公差一覧表

### 7.2 分析レポート
- **統計レポート**:
  - 寸法分布
  - 不良率分析
  - トレンド分析
  - 改善提案